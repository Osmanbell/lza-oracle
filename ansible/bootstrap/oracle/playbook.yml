---
- hosts: all
  become: true
  gather_facts: false  # Set to false because Python may not be available yet
  pre_tasks:
    - name: üõ†Ô∏è Install Python 3 if missing (raw command)
      raw: |
        sudo yum install -y python3 || sudo apt update && sudo apt install -y python3
      register: python_install
      changed_when: "'Complete!' in python_install.stdout or 'installed' in python_install.stdout"
      failed_when: python_install.rc != 0 and 'already installed' not in python_install.stdout

    - name: ‚úÖ Ensure Python is available for Ansible
      setup: {}

  roles:
    - common
    # - grid        # Uncomment if needed for Grid Infrastructure
    - oracle19c     # Oracle software installation
    - dbca          # Database creation
